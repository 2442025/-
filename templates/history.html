{% extends "base.html" %}

{% block content %}
<div class="card">
    <h2 style="margin-bottom: 20px;">ğŸ“Š åˆ©ç”¨å±¥æ­´</h2>
    
    {% if history %}
        <div style="overflow-x: auto;">
            <table style="width: 100%; border-collapse: collapse;">
                <thead>
                    <tr style="border-bottom: 2px solid #eee; text-align: left;">
                        <th style="padding: 10px; font-weight: bold; color: #666;">æ—¥æ™‚</th>
                        <th style="padding: 10px; font-weight: bold; color: #666;">ãƒãƒƒãƒ†ãƒªãƒ¼</th>
                        <th style="padding: 10px; font-weight: bold; color: #666;">ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</th>
                        <th style="padding: 10px; font-weight: bold; color: #666;">æ–™é‡‘</th>
                        <th style="padding: 10px; font-weight: bold; color: #666;">æ“ä½œ</th>
                    </tr>
                </thead>
                <tbody>
                    {% for item in history %}
                        <tr style="border-bottom: 1px solid #eee; padding: 15px 0;">
                            <td style="padding: 15px 10px;">
                                <div style="font-weight: bold;">{{ item.start_at }}</div>
                                {% if item.end_at != "è²¸å‡ºä¸­" %}
                                    <div style="font-size: 12px; color: #666;">{{ item.end_at }}</div>
                                {% endif %}
                            </td>
                            <td style="padding: 15px 10px;">
                                <div style="font-weight: bold;">{{ item.battery_serial }}</div>
                                <div style="font-size: 12px; color: #666;">{{ item.station_name }}</div>
                            </td>
                            <td style="padding: 15px 10px;">
                                {% if item.status == "ongoing" %}
                                    <span style="background: #fff3cd; color: #856404; padding: 4px 8px; border-radius: 4px; font-size: 12px;">è²¸å‡ºä¸­</span>
                                {% elif item.status == "returned" %}
                                    <span style="background: #d4edda; color: #155724; padding: 4px 8px; border-radius: 4px; font-size: 12px;">è¿”å´æ¸ˆ</span>
                                {% elif item.status == "charged" %}
                                    <span style="background: #e3f2fd; color: #1565c0; padding: 4px 8px; border-radius: 4px; font-size: 12px;">ãƒãƒ£ãƒ¼ã‚¸</span>
                                {% endif %}
                            </td>
                            <td style="padding: 15px 10px;">
                                {% if item.price > 0 %}
                                    <span style="color: #e74c3c; font-weight: bold;">Â¥{{ item.price }}</span>
                                {% elif item.price < 0 %}
                                    <span style="color: #27ae60; font-weight: bold;">+Â¥{{ -item.price }}ãƒãƒ£ãƒ¼ã‚¸</span>
                                {% else %}
                                    <span style="color: #666;">Â¥0</span>
                                {% endif %}
                            </td>
                            <td style="padding: 15px 10px;">
                                {% if item.status == "ongoing" %}
                                    <a href="/return/{{ item.id }}" class="btn btn-danger" style="padding: 6px 12px; font-size: 12px;">è¿”å´ã™ã‚‹</a>
                                {% else %}
                                    <span style="color: #666; font-size: 12px;">-</span>
                                {% endif %}
                            </td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    {% else %}
        <div style="text-align: center; padding: 40px; color: #666;">
            <div style="font-size: 40px; margin-bottom: 10px;">ğŸ“‹</div>
            <div style="font-size: 18px; margin-bottom: 5px;">åˆ©ç”¨å±¥æ­´ãŒã‚ã‚Šã¾ã›ã‚“</div>
            <div>ã¾ãšã¯ãƒãƒƒãƒ†ãƒªãƒ¼ã‚’è²¸å‡ºã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼</div>
        </div>
    {% endif %}
    
    <div style="margin-top: 30px; text-align: center;">
        <a href="/home" class="btn btn-secondary" style="margin-right: 10px;">ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹</a>
        <a href="/charge" class="btn btn-success">ğŸ’° æ®‹é«˜ãƒãƒ£ãƒ¼ã‚¸</a>
    </div>
</div>

<div class="card">
    <h3>â„¹ï¸ å±¥æ­´ã«ã¤ã„ã¦</h3>
    <ul style="padding-left: 20px; line-height: 1.8;">
        <li><strong>è²¸å‡ºä¸­:</strong> è¿”å´ã•ã‚Œã¦ã„ãªã„åˆ©ç”¨è¨˜éŒ²</li>
        <li><strong>è¿”å´æ¸ˆ:</strong> æ­£å¸¸ã«è¿”å´ã•ã‚ŒãŸåˆ©ç”¨è¨˜éŒ²</li>
        <li><strong>ãƒãƒ£ãƒ¼ã‚¸:</strong> æ®‹é«˜ãƒãƒ£ãƒ¼ã‚¸ã®è¨˜éŒ²</li>
        <li>è¿”å´æ¸ˆã®è¨˜éŒ²ã¯æ–™é‡‘ãŒç¢ºå®šã—ã¦ã„ã¾ã™</li>
    </ul>
</div>
{% endblock %}
